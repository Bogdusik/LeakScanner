# Исправления ошибок

## Проблема: Ошибка при сканировании репозиториев с пробелами в именах файлов

### Описание ошибки

При сканировании репозиториев возникала ошибка:
```
java.lang.IllegalArgumentException: The URI contain illegal characters: /repos/Bogdusik/Weevent/contents/Weevent-main%202/README.md?ref=main
```

Проблема возникала когда в пути файла были пробелы или специальные символы, которые не были правильно закодированы в URL.

### Причина

В `GitHubService.getFileContent()` и `GitLabService.getFileContent()` пути файлов не кодировались правильно перед добавлением в URL. WebClient ожидает, что URI будет правильно сформирован, но при использовании строкового форматирования специальные символы не кодировались.

### Исправления

1. **GitHubService.java** - Исправлено кодирование путей файлов:
   - Путь файла теперь кодируется по сегментам (сохраняя слэши)
   - Пробелы кодируются как `%20` (а не `+`)
   - Увеличены таймауты с 10 до 15 секунд
   - Улучшена обработка ошибок с конкретными сообщениями

2. **GitLabService.java** - Исправлено кодирование путей файлов:
   - Путь файла кодируется правильно для GitLab API
   - Слэши кодируются как `%2F`
   - Увеличены таймауты с 10 до 15 секунд

3. **Улучшена обработка ошибок**:
   - Добавлена проверка на `IllegalArgumentException` для неправильных символов в URI
   - Улучшено логирование ошибок с указанием проблемного файла
   - Файлы с ошибками пропускаются, сканирование продолжается

### Результат

- ✅ Репозитории с пробелами в именах файлов теперь сканируются корректно
- ✅ Улучшена обработка ошибок - сканирование не прерывается из-за одного проблемного файла
- ✅ Увеличены таймауты для более стабильной работы с медленными API

## Дополнительные улучшения

1. **Увеличены таймауты**:
   - Получение дерева репозитория: 15 → 20 секунд
   - Получение содержимого файла: 10 → 15 секунд
   - Получение информации о репозитории: 10 → 15 секунд
   - Проверка веток: 5 → 10 секунд

2. **Улучшена обработка ошибок**:
   - Файлы с ошибками пропускаются, сканирование продолжается
   - Более детальное логирование для отладки

## Тестирование

После исправлений рекомендуется протестировать на репозиториях с:
- Пробелами в именах файлов/папок
- Специальными символами в путях
- Длинными именами файлов
- Файлами в подпапках с пробелами
